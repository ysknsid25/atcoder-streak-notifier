name: Notify Solve Streak

on:
  push:
    paths:
      - '**/*'  # すべてのファイルが対象

jobs:
  notify-solve-streak:
    runs-on: ubuntu-latest

    steps:
    - name: Check out the repository
      uses: actions/checkout@v4
      with:
        fetch-depth: 0  # フル履歴を取得する

    - name: Find files with specific pattern
      run: |
        if [ "${{ github.event.before }}" = "0000000000000000000000000000000000000000" ]; then
          echo "This is the first commit, skipping diff."
        else
          files=$(git diff --name-only ${{ github.event.before }} ${{ github.sha }} | grep -E '^[0-9]+-[A-G]\.$')
          if [ -n "$files" ]; then
            echo "Found file(s): $files"
          else
            echo "No matching files found."
          fi
        fi
